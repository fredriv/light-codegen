@import com.jsoniter.any.Any
@args (Any config, String expose)

FROM docker-registry-default.apps-np.caas.cibc.com/certified-mw/cibc-openjdk18-openshift
#EXPOSE  8443
@with (name = config.get("artifactId") + "-" + config.get("version") + ".jar") {ADD @name server.jar}
CMD ["/bin/sh","-c","java -XX:+PrintFlagsFinal -XX:+PrintGCDetails -XX:+HeapDumpOnOutOfMemoryError -XX:+DisableExplicitGC -XX:+PrintGCTimeStamps -XX:+PrintAdaptiveSizePolicy -XX:+PrintReferenceGC -verbose:gc -XX:+UseG1GC -Xmx800m  -Dfile.encoding=UTF-8  -Dlight-4j-config-dir=/config -Dlogback.configurationFile=/config/logback.xml -jar server.jar"]
